@using Niu.Nutri.Shared.Blazor.Forms.RightContainer
@using Niu.Nutri.SystemSettings.Application.DTO.Aggregates.SystemSettingsAgg.Requests;
@using Syncfusion.Blazor.Buttons

<div class="rightcontainer-header-accordeon-grupo-empresa" @onclick=OnClick>

    <div class="titulos-rightcontainer-v2">
        <div class="quebra-linha-titulos-rightcontainer-v2">
            <div class="circle">
                <SfIcon IconCss="bi bi-menu-button-wide-fill"></SfIcon>
            </div>

            <div class="grupo-titulos-rightcontainer-v2">
                <div class="titulo-rightcontainer-v2">
                    @if (!string.IsNullOrEmpty(Model?.H1))
                    {
                        @(Model?.H1.Length > 20 ? Model?.H1.Substring(0, 20) + "..." : Model?.H1)
                    }
                </div>
                <div class="subtitulo-rightcontainer-v2">
                    @if (!string.IsNullOrEmpty(Model?.Description))
                    {
                        @(Model?.Description.Length > 20 ? Model?.Description.Substring(0, 20) + "..." : Model?.Description)
                    }
                </div>
            </div>
        </div>
    </div>



    @*<div class="container-name testeA" @onclick=OnClick>
    <div class="title-1">
    <div class="grupo valign-text-middle inter-medium-silver-10px">@Model?.H1</div>
    </div>
    <div class="title-1">
    <a class="grupo-1 valign-text-middle inter-medium-black-14px">@(Model?.RazaoSocial)</a>
    </div>
    </div>*@

    <div class="rightcontainer-etapas-cadastro-btn-add-remover-grupo-empresa">
        @if (Model?.Active.HasValue == true)
        {
            <div class="rightcontainer-etapa-cadastro-grupo-empresa">
                <SfIcon class="cadastro-completo-grupo-empresa" IconCss="bi bi-check-circle-fill"></SfIcon>
            </div>

            <div class="rightcontainer-add-grupo-empresa" @onmouseover="()=>{ RightContext.IsMouseHoverPlusBtn = true; }"
             @onmouseout="()=>{ RightContext.IsMouseHoverPlusBtn = false; }">

                <SfIcon IconCss="bi bi-plus-circle-fill"></SfIcon>
            </div>

            <div class="rightcontainer-remover-grupo-empresa" @onmouseover="()=>{ RightContext.IsMouseHoverTrashBtn = true; }"
             @onmouseout="()=>{ RightContext.IsMouseHoverTrashBtn = false; }">

                <SfIcon IconCss="bi bi-trash-fill"></SfIcon>
            </div>

        }
        else
        {
            <div class="rightcontainer-etapa-cadastro-grupo-empresa">
                <i class="etapa-grupo-empresa">@(Model?.CurrentStep + 1)</i>
            </div>
        }
    </div>
</div>

@code {
    [Parameter] public Func<Task> OnClick { get; set; }
    [Parameter] public SystemPanelDTO Model { get; set; }
    [Parameter] public Func<Task> OnCreateSubElementClicked { get; set; }
    [Parameter] public GenericRightContainerContext RightContext { get; set; }

    protected override Task OnInitializedAsync()
    {
        if (!RightContext.GroupRefreshActions.ContainsKey(Model.ExternalId))
            RightContext.GroupRefreshActions.Add(this.Model.ExternalId, this.StateHasChanged);

        return base.OnInitializedAsync();
    }
}